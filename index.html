<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
  <title>Monthly Budget Checklist ‚Ä¢ This Month</title>
  <style>
    :root{
      --bg1:#0f172a; --bg2:#111827;
      --card:#ffffff; --ink:#0b1220; --muted:#6b7280;
      --ok:#16a34a; --warn:#f59e0b; --bad:#ef4444; --accent:#2563eb;
      --line:#e5e7eb;
    }
    *{box-sizing:border-box}
    body{
      margin:0; padding:16px;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      color:#fff;
    }
    .wrap{max-width:1020px;margin:0 auto}
    .top{display:flex; gap:12px; flex-wrap:wrap; align-items:stretch; margin-bottom:12px;}
    .card{
      background:rgba(255,255,255,.96);
      color:var(--ink);
      border-radius:16px;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
      padding:14px;
      flex:1;
      min-width:260px;
    }
    h1{margin:0 0 6px; font-size:20px}
    h2{margin:0 0 10px; font-size:16px}
    .sub{color:var(--muted); font-size:13px}
    .pillrow{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .pill{
      border:1px solid var(--line);
      border-radius:999px;
      padding:8px 10px;
      font-size:13px;
      display:flex; gap:8px; align-items:center;
      background:#fff;
    }
    .pill b{font-weight:800}
    .pill .dot{width:10px;height:10px;border-radius:999px;background:var(--accent)}
    .pill.ok .dot{background:var(--ok)}
    .pill.warn .dot{background:var(--warn)}
    .pill.bad .dot{background:var(--bad)}
    .grid{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:920px){.grid{grid-template-columns:1fr 1fr}}
    .list{display:flex;flex-direction:column;gap:8px}
    .item{
      border:1px solid var(--line);
      border-radius:12px;
      padding:10px;
      background:#fff;
      display:flex; gap:10px; align-items:flex-start;
    }
    input[type="checkbox"]{width:20px;height:20px;margin-top:2px;accent-color:var(--accent);flex:0 0 auto;}
    .meta{flex:1}
    .title{display:flex;justify-content:space-between;gap:10px}
    .name{font-weight:800}
    .amt{font-weight:900}
    .note{color:var(--muted);font-size:12px;margin-top:3px;line-height:1.35}
    .small{color:var(--muted);font-size:12px;display:flex;gap:10px;flex-wrap:wrap;margin-top:6px;}
    .controls{display:flex; gap:8px; flex-wrap:wrap; margin-top:10px;}
    button{
      border:0; border-radius:10px; padding:10px 12px;
      font-weight:800; cursor:pointer; background:var(--accent); color:#fff;
    }
    button.secondary{background:#111827}
    button.ghost{background:#fff;color:var(--ink);border:1px solid var(--line);}
    .hr{height:1px;background:rgba(255,255,255,.18);margin:12px 0}
    .tag{
      display:inline-block; font-size:11px; padding:3px 8px; border-radius:999px;
      border:1px solid var(--line); background:#f8fafc; color:#0b1220; margin-left:6px;
    }

    /* progress */
    .barWrap{margin-top:10px}
    .barRow{display:flex;justify-content:space-between;gap:12px;align-items:center}
    .barLabel{font-size:12px;color:var(--muted)}
    .barPct{font-size:12px;font-weight:900}
    .bar{
      width:100%; height:12px; border-radius:999px;
      background:#e5e7eb; overflow:hidden; border:1px solid #d1d5db;
      margin-top:6px;
    }
    .fill{
      height:100%; width:0%;
      background:linear-gradient(90deg, var(--accent), #60a5fa);
      border-radius:999px;
      transition:width .25s ease;
    }

    /* number cards */
    .calc{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px;}
    .box{
      border:1px solid var(--line); border-radius:12px; padding:10px; background:#fff; color:var(--ink);
    }
    .box .label{color:var(--muted);font-size:12px}
    .box .value{font-size:18px;font-weight:950;margin-top:4px}
    .value.good{color:var(--ok)}
    .value.caution{color:var(--warn)}
    .value.risk{color:var(--bad)}

    /* toggle */
    .toggleRow{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
      margin-top:10px; padding:10px; border:1px solid var(--line); border-radius:12px; background:#fff;
    }
    .toggleRow label{font-weight:900}
    .switch{
      position:relative; width:52px; height:30px; border-radius:999px;
      background:#d1d5db; cursor:pointer; flex:0 0 auto; border:1px solid #cbd5e1;
    }
    .switch::after{
      content:""; position:absolute; top:3px; left:3px;
      width:24px; height:24px; border-radius:999px; background:#fff;
      box-shadow:0 4px 10px rgba(0,0,0,.15);
      transition:left .2s ease;
    }
    .switch.on{background:#93c5fd; border-color:#60a5fa;}
    .switch.on::after{left:25px;}
    .toggleText{color:var(--muted);font-size:12px;line-height:1.35;flex:1}
    .footer{
      margin-top:12px; color:rgba(255,255,255,.85);
      font-size:12px; line-height:1.45;
    }
  </style>
</head>
<body>
<div class="wrap">
  <div class="top">
    <div class="card">
      <h1>Monthly Budget Checklist (This Month)</h1>
      <div class="sub">Tap to check items off. Progress saves automatically on this device.</div>

      <div class="pillrow">
        <div class="pill"><span class="dot"></span> Checking start: <b id="checkingStart">$0.00</b></div>
        <div class="pill"><span class="dot"></span> Savings (off-limits): <b id="savingsOff">$0.00</b></div>
        <div class="pill warn"><span class="dot"></span> Pending bills total: <b id="pendingTotal">$0.00</b></div>
      </div>

      <div class="calc">
        <div class="box">
          <div class="label">Checking after all pending bills clear</div>
          <div class="value" id="afterBills">$0.00</div>
        </div>
        <div class="box">
          <div class="label">Freedom cushion after plan steps</div>
          <div class="value" id="cushion">$0.00</div>
        </div>
      </div>

      <div class="barWrap">
        <div class="barRow">
          <div class="barLabel"><b>Bills Progress</b> (how many bills are checked)</div>
          <div class="barPct" id="billsPct">0%</div>
        </div>
        <div class="bar"><div class="fill" id="billsFill"></div></div>

        <div style="height:10px"></div>

        <div class="barRow">
          <div class="barLabel"><b>Plan Progress</b> (debt + savings moves)</div>
          <div class="barPct" id="planPct">0%</div>
        </div>
        <div class="bar"><div class="fill" id="planFill"></div></div>
      </div>

      <div class="controls">
        <button id="resetBtn" class="ghost" type="button">Reset all checkboxes</button>
        <button id="markBillsBtn" class="secondary" type="button">Mark all Bills as Paid</button>
        <button id="markPlanBtn" class="secondary" type="button">Mark all Plan Steps Done</button>
      </div>
    </div>

    <div class="card">
      <h2>üî• No-Spend Week Toggle (optional)</h2>
      <div class="sub">This doesn‚Äôt shame you ‚Äî it just creates a gentle daily cap so you can still eat out without blowing the month.</div>

      <div class="toggleRow">
        <div id="noSpendSwitch" class="switch" role="switch" aria-checked="false" tabindex="0"></div>
        <div>
          <label>No-Spend Week</label>
          <div class="toggleText">When ON: your ‚Äúeating out‚Äù cap becomes a small daily limit for 7 days so you reset spending without feeling deprived.</div>
        </div>
      </div>

      <div class="calc">
        <div class="box">
          <div class="label">Available in checking ‚Äúright now‚Äù (as you check items)</div>
          <div class="value" id="availableNow">$0.00</div>
        </div>
        <div class="box">
          <div class="label">Suggested daily cap (when No-Spend Week is ON)</div>
          <div class="value" style="font-size:14px;font-weight:950" id="dailyCap">$0/day</div>
        </div>
      </div>

      <div class="hr"></div>
      <h2>Quick Rules</h2>
      <div class="list">
        <div class="item">
          <input type="checkbox" disabled checked />
          <div class="meta">
            <div class="title">
              <div class="name">Savings stays untouched</div>
              <div class="amt"><span class="tag">Rule</span></div>
            </div>
            <div class="note">We act like savings doesn‚Äôt exist so it keeps growing.</div>
          </div>
        </div>
        <div class="item">
          <input type="checkbox" disabled checked />
          <div class="meta">
            <div class="title">
              <div class="name">No new BNPL this month</div>
              <div class="amt"><span class="tag">Rule</span></div>
            </div>
            <div class="note">Installments are already on the board‚Äîdon‚Äôt add any new ones until next month.</div>
          </div>
        </div>
        <div class="item">
          <input type="checkbox" disabled checked />
          <div class="meta">
            <div class="title">
              <div class="name">Utilization focus: Savor ‚Üí Merrick ‚Üí Platinum</div>
              <div class="amt"><span class="tag">Rule</span></div>
            </div>
            <div class="note">This improves score faster than random extra payments.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="grid">
    <div class="card">
      <h2>‚úÖ Mandatory Bills (check off as they clear)</h2>
      <div class="sub" style="margin-bottom:10px;">Only check a bill when you see it posted/cleared (not just pending).</div>
      <div class="list" id="billsList"></div>
    </div>

    <div class="card">
      <h2>üî• Plan Steps (do after bills clear)</h2>
      <div class="sub" style="margin-bottom:10px;">This is Option A + cushion + savings add.</div>
      <div class="list" id="planList"></div>

      <div class="hr"></div>
      <h2>üçΩÔ∏è Cushion (Food / Gas / Eating Out)</h2>
      <div class="sub">This is what remains in checking after plan steps (savings excluded).</div>
      <div class="calc">
        <div class="box">
          <div class="label">Cushion amount</div>
          <div class="value" id="cushion2">$0.00</div>
        </div>
        <div class="box">
          <div class="label">Simple pacing idea</div>
          <div class="value" style="font-size:14px;font-weight:950" id="pace">
            ‚Äî
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="footer">
    <b>How this saves:</b> Everything saves to your browser (localStorage). If you switch devices or clear browser data, it won‚Äôt carry over.
    <br/>
    Want a version that syncs across devices? I can make a Google Sheets version too.
  </div>
</div>

<script>
  // ========= EDITABLE NUMBERS (your current month) =========
  const checkingStart = 4503.34;     // Checking balance at planning time
  const savingsOffLimits = 740.93;   // Savings (do not touch)

  // Bills to clear this month (mandatory)
  const bills = [
    { id:"bill-jg", name:"JG Wentworth", amount:709.00, note:"Normal payment (catch-up already handled previously)." },
    { id:"bill-ms", name:"Military Star (autopay)", amount:300.00, note:"Mandatory pull." },
    { id:"bill-cap1plat", name:"Capital One Platinum (scheduled)", amount:200.00, note:"Scheduled payment." },
    { id:"bill-cap1sav", name:"Capital One Savor (scheduled)", amount:100.00, note:"Scheduled payment (finish the remainder in Plan Steps)." },
    { id:"bill-merrickmin", name:"Merrick Bank (minimum)", amount:35.00, note:"Minimum due (extra payment in Plan Steps)." },
    { id:"bill-verizon", name:"Verizon", amount:89.76, note:"Monthly bill." },
    { id:"bill-bnpl", name:"BNPL / Installments (total)", amount:171.42, note:"Existing installment payments (no new BNPL this month)." },
    { id:"bill-nationwide", name:"Nationwide (pet insurance)", amount:103.94, note:"Current due." }
  ];

  // Option A + cushion plan steps (after bills clear)
  const planSteps = [
    { id:"plan-savorfinish", name:"Finish Capital One Savor (payoff remainder)", amount:126.98, note:"After the $100 scheduled clears, pay the remaining ~ $126.98 so Savor = $0." },
    { id:"plan-merrickextra", name:"Merrick Bank EXTRA payment", amount:300.00, note:"Drops utilization hard (balance was ~$370 on $400 limit)." },
    { id:"plan-platextra", name:"Capital One Platinum EXTRA payment", amount:600.00, note:"After the $200 scheduled clears, add $600 extra to reduce utilization meaningfully." },
    { id:"plan-savingsadd", name:"Transfer to Savings (add more)", amount:500.00, note:"Savings stays ‚Äòinvisible‚Äô‚Äîwe keep stacking." }
  ];

  // No-spend week settings (you can adjust)
  const noSpendWeekDays = 7;
  const noSpendWeekDailyCapPercentOfCushion = 0.12; // 12% of cushion/day as a soft cap

  // ========= HELPERS =========
  const fmt = (n) => n.toLocaleString(undefined,{style:"currency",currency:"USD"});
  const sum = (arr) => arr.reduce((a,b)=>a+(b.amount||0),0);

  const pendingTotal = sum(bills);
  const afterBills = checkingStart - pendingTotal;
  const planTotal = sum(planSteps);
  const cushion = afterBills - planTotal;

  // ========= TOP NUMBERS =========
  document.getElementById("checkingStart").textContent = fmt(checkingStart);
  document.getElementById("savingsOff").textContent = fmt(savingsOffLimits);
  document.getElementById("pendingTotal").textContent = fmt(pendingTotal);
  document.getElementById("afterBills").textContent = fmt(afterBills);
  document.getElementById("cushion").textContent = fmt(cushion);
  document.getElementById("cushion2").textContent = fmt(cushion);

  // pacing
  const weekly = cushion / 4;
  const daily = cushion / 28;
  document.getElementById("pace").textContent = `${fmt(weekly)}/week or ${fmt(daily)}/day (approx)`;

  // cushion color
  function setCushionColor(el){
    el.classList.remove("good","caution","risk");
    if (cushion >= 1200) el.classList.add("good");
    else if (cushion >= 800) el.classList.add("caution");
    else el.classList.add("risk");
  }
  setCushionColor(document.getElementById("cushion"));
  setCushionColor(document.getElementById("cushion2"));

  // ========= CHECKBOX PERSISTENCE =========
  const KEY = "budget_checklist_v2";
  const state = JSON.parse(localStorage.getItem(KEY) || "{}");
  const saveState = () => localStorage.setItem(KEY, JSON.stringify(state));

  function makeRow(container, item, group){
    const row = document.createElement("div");
    row.className = "item";

    const cb = document.createElement("input");
    cb.type = "checkbox";
    cb.checked = !!state[item.id];

    cb.addEventListener("change", ()=>{
      state[item.id] = cb.checked;
      saveState();
      updateProgressAndAvailable();
    });

    const meta = document.createElement("div");
    meta.className = "meta";

    const title = document.createElement("div");
    title.className = "title";

    const name = document.createElement("div");
    name.className = "name";
    name.textContent = item.name;

    const amt = document.createElement("div");
    amt.className = "amt";
    amt.textContent = fmt(item.amount);

    title.appendChild(name);
    title.appendChild(amt);

    const note = document.createElement("div");
    note.className = "note";
    note.textContent = item.note || "";

    const small = document.createElement("div");
    small.className = "small";
    small.innerHTML = `<span><b>Group:</b> ${group}</span><span><b>ID:</b> ${item.id}</span>`;

    meta.appendChild(title);
    meta.appendChild(note);
    meta.appendChild(small);

    row.appendChild(cb);
    row.appendChild(meta);

    container.appendChild(row);
  }

  // render lists
  const billsList = document.getElementById("billsList");
  bills.forEach(b => makeRow(billsList, b, "Bills"));

  const planList = document.getElementById("planList");
  planSteps.forEach(p => makeRow(planList, p, "Plan Steps"));

  // ========= PROGRESS + AVAILABLE NOW =========
  function pct(done, total){
    if (total <= 0) return 0;
    return Math.round((done/total)*100);
  }

  function updateProgressAndAvailable(){
    const billsDone = bills.filter(x => !!state[x.id]).length;
    const planDone  = planSteps.filter(x => !!state[x.id]).length;

    const billsP = pct(billsDone, bills.length);
    const planP  = pct(planDone, planSteps.length);

    document.getElementById("billsPct").textContent = `${billsP}%`;
    document.getElementById("planPct").textContent  = `${planP}%`;

    document.getElementById("billsFill").style.width = `${billsP}%`;
    document.getElementById("planFill").style.width  = `${planP}%`;

    // compute "available now" based on what you've checked off
    // Interpretation: checked bills/plan steps are "paid/spent", so available = checkingStart - sum(checked bills) - sum(checked plan steps)
    const spentBills = sum(bills.filter(x => !!state[x.id]));
    const spentPlan  = sum(planSteps.filter(x => !!state[x.id]));
    const available = checkingStart - spentBills - spentPlan;

    const el = document.getElementById("availableNow");
    el.textContent = fmt(available);

    el.classList.remove("good","caution","risk");
    if (available >= 1500) el.classList.add("good");
    else if (available >= 900) el.classList.add("caution");
    else el.classList.add("risk");

    // update daily cap if no-spend week is on
    updateDailyCap();
  }

  // ========= BUTTONS =========
  document.getElementById("resetBtn").addEventListener("click", ()=>{
    [...bills, ...planSteps].forEach(x => { state[x.id] = false; });
    state["noSpendOn"] = false;
    saveState();
    // reset checkboxes
    document.querySelectorAll('.list .item input[type="checkbox"]').forEach(cb => cb.checked = false);
    // reset toggle UI
    setNoSpendUI(false);
    updateProgressAndAvailable();
  });

  document.getElementById("markBillsBtn").addEventListener("click", ()=>{
    bills.forEach(x => { state[x.id] = true; });
    saveState();
    syncCheckboxes();
    updateProgressAndAvailable();
  });

  document.getElementById("markPlanBtn").addEventListener("click", ()=>{
    planSteps.forEach(x => { state[x.id] = true; });
    saveState();
    syncCheckboxes();
    updateProgressAndAvailable();
  });

  function syncCheckboxes(){
    document.querySelectorAll('.list .item').forEach(row=>{
      const cb = row.querySelector('input[type="checkbox"]');
      if (!cb || cb.disabled) return;
      const small = row.querySelector(".small");
      const match = small && small.textContent.match(/ID:\s*([a-z0-9\-]+)/i);
      if (!match) return;
      const id = match[1];
      cb.checked = !!state[id];
    });
  }

  // ========= NO-SPEND WEEK TOGGLE =========
  const switchEl = document.getElementById("noSpendSwitch");

  function setNoSpendUI(on){
    if (on){
      switchEl.classList.add("on");
      switchEl.setAttribute("aria-checked","true");
    } else {
      switchEl.classList.remove("on");
      switchEl.setAttribute("aria-checked","false");
    }
  }

  function toggleNoSpend(){
    const now = !state["noSpendOn"];
    state["noSpendOn"] = now;
    saveState();
    setNoSpendUI(now);
    updateDailyCap();
  }

  switchEl.addEventListener("click", toggleNoSpend);
  switchEl.addEventListener("keydown", (e)=>{
    if (e.key === "Enter" || e.key === " "){
      e.preventDefault();
      toggleNoSpend();
    }
  });

  function updateDailyCap(){
    const on = !!state["noSpendOn"];
    const capEl = document.getElementById("dailyCap");

    if (!on){
      capEl.textContent = "OFF";
      return;
    }
    // compute a soft daily cap based on cushion (or available if you want it stricter)
    const cap = Math.max(10, Math.round((cushion * noSpendWeekDailyCapPercentOfCushion)));
    capEl.textContent = `${fmt(cap)}/day for ${noSpendWeekDays} days`;
  }

  // init
  setNoSpendUI(!!state["noSpendOn"]);
  syncCheckboxes();
  updateProgressAndAvailable();
</script>
</body>
</html>
